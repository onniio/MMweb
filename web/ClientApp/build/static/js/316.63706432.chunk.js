"use strict";(self.webpackChunkNovaChatAppReact=self.webpackChunkNovaChatAppReact||[]).push([[316],{92316:function(e,t,s){s.r(t),s.d(t,{default:function(){return b}});var r=s(74165),a=s(15861),n=s(15671),i=s(43144),o=s(60136),l=s(29388),u=s(72791),c=s(9555),d=s(36864),h=s(376),p=s(77558),f=s(30588),m=s(29467),v=s(11730),w=s(87309),j=s(80184),O=c.Z.Option,x=function(e){(0,o.Z)(s,e);var t=(0,l.Z)(s);function s(){var e;(0,n.Z)(this,s);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={tabIndex:"1",userId:0,selectObj:{},selectObjError:{},pwdObj:{password:"",confirmPassword:""},pwdObjError:{},users:[],page:1,pageSize:10,totalUsers:0,loading:!0,sortOrder:"Fname",searchString:"",isDisableOpen:!1,isResetOpen:!1,isDeleteOpen:!1,isEditOpen:!1,isChangePwdOpen:!1},e.pwdFormRef=u.createRef(),e}return(0,i.Z)(s,[{key:"componentDidMount",value:function(){this.populateUserData()}},{key:"populateUserData",value:function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.setState({loading:!0}),t={},"1"!==this.state.tabIndex){e.next=9;break}return e.next=6,m.Z.getUsers(this.state.page,this.state.pageSize,this.state.sortOrder,this.state.searchString.trim());case 6:t=e.sent,e.next=13;break;case 9:if("2"!==this.state.tabIndex){e.next=13;break}return e.next=12,m.Z.getAuditUsers(this.state.page,this.state.pageSize,this.state.sortOrder,this.state.searchString.trim());case 12:t=e.sent;case 13:this.setState({totalUsers:t.totalUsers,users:t.users,loading:!1}),e.next=18;break;case 16:e.prev=16,e.t0=e.catch(0);case 18:case"end":return e.stop()}}),e,this,[[0,16]])})));return function(){return e.apply(this,arguments)}}()},{key:"tabChange",value:function(e){var t=this;this.setState({tabIndex:e,page:1},(function(){t.populateUserData()}))}},{key:"changeSearch",value:function(e){this.setState({searchString:e.target.value})}},{key:"enterToSearch",value:function(e){13===e.keyCode&&this.populateUserData()}},{key:"handleDisable",value:function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.Z.DisabledUser(this.state.userId);case 2:this.populateUserData(),this.setState({isDisableOpen:!1});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleReview",value:function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.Z.ApproveUser(this.state.userId);case 2:this.populateUserData(),this.setState({isResetOpen:!1});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleDelete",value:function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.Z.deleteUser(this.state.userId);case 2:this.populateUserData(),this.setState({isDeleteOpen:!1});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"editUser",value:function(e,t){var s=this.state,r=s.selectObj,a=s.selectObjError;r[t]=e,a[t]=!(null!==e&&void 0!==e&&e.trim()),this.setState({selectObj:r,selectObjError:a})}},{key:"handleEdit",value:function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var t,s,a,n,i,o,l,u;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=this.state,o=i.selectObj,l=i.selectObjError,u=0,null!==(t=o.firstName)&&void 0!==t&&t.trim()||(l.firstName=!0,u++),null!==(s=o.lastName)&&void 0!==s&&s.trim()||(l.lastName=!0,u++),null!==(a=o.email)&&void 0!==a&&a.trim()||(l.email=!0,u++),null!==(n=o.role)&&void 0!==n&&n.trim()||(l.role=!0,u++),!(u>0)){e.next=9;break}return this.setState({selectObjError:l}),e.abrupt("return");case 9:return e.next=11,m.Z.updateUser(this.state.userId,this.state.selectObj);case 11:this.populateUserData(),this.setState({isEditOpen:!1,selectObj:{},selectObjError:{}});case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"changePwd",value:function(e,t){var s=this.state,r=s.pwdObj,a=s.pwdObjError;r[t]=e,a[t]=!e,a.confirmPasswordDiff=!!r.password&&!!r.confirmPassword&&r.password!==r.confirmPassword,this.setState({pwdObj:r,pwdObjError:a})}},{key:"handleChangePwd",value:function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var t,s,a,n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state,s=t.pwdObj,a=t.pwdObjError,n=0,s.password||(a.password=!0,n++),s.confirmPassword||(a.confirmPassword=!0,n++),s.password!==s.confirmPassword&&(a.confirmPasswordDiff=!0,n++),this.setState({pwdObjError:a}),!(n>0)){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,m.Z.changeUserPassword(this.state.userId,s);case 10:this.populateUserData(),this.setState({isChangePwdOpen:!1,pwdObj:{password:"",confirmPassword:""},pwdObjError:{}});case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.t,s=this.state,r=s.users,a=s.selectObj,n=s.selectObjError,i=s.pwdObj,o=s.pwdObjError,l=[{key:"1",label:t("users.All users")},{key:"2",label:t("users.Pending review")}],u=[{title:t("users.email"),dataIndex:"email",sorter:!0,sortOrder:"Email"===this.state.sortOrder?"ascend":"Email_desc"===this.state.sortOrder&&"descend"},{title:t("users.firstName"),dataIndex:"firstName",sorter:!0,sortOrder:"Fname"===this.state.sortOrder?"ascend":"Fname_desc"===this.state.sortOrder&&"descend"},{title:t("users.lastName"),dataIndex:"lastName",sorter:!0,sortOrder:"Lname"===this.state.sortOrder?"ascend":"Lname_desc"===this.state.sortOrder&&"descend"},{title:t("users.approved"),dataIndex:"approved",render:function(e,s){return t(e?"users.reviewed":"users.pending review")}},{title:t("users.operate"),dataIndex:"approved",render:function(s,r){return(0,j.jsxs)("div",{children:[s?(0,j.jsx)(w.ZP,{type:"link",onClick:function(){e.setState({userId:r.id,selectObj:r,isDisableOpen:!0})},children:t("users.disable account")}):(0,j.jsx)(w.ZP,{type:"link",onClick:function(){e.setState({userId:r.id,selectObj:r,isResetOpen:!0})},children:t("users.review account")}),(0,j.jsx)(w.ZP,{type:"link",onClick:function(){e.setState({userId:r.id,selectObj:r,isDeleteOpen:!0})},children:t("users.delete")}),(0,j.jsx)(w.ZP,{type:"link",onClick:function(){e.setState({userId:r.id,selectObj:r,isEditOpen:!0})},children:t("users.edit")}),(0,j.jsx)(w.ZP,{type:"link",onClick:function(){e.setState({userId:r.id,selectObj:r,isChangePwdOpen:!0})},children:t("users.Change password")})]})}}];return(0,j.jsxs)("div",{className:"users_list",children:[(0,j.jsx)(d.Z,{className:"pl_tab",defaultActiveKey:"1",items:l,onChange:function(t){e.tabChange(t)}}),(0,j.jsx)(h.Z,{value:this.state.searchString,className:"search",placeholder:t("users.search"),prefix:(0,j.jsx)(v.Z,{}),onChange:function(t){e.changeSearch(t)},onKeyDown:function(t){e.enterToSearch(t)}}),(0,j.jsx)(p.Z,{columns:u,dataSource:r,onChange:function(t,s,r){console.log(r),e.setState({},(function(){}))},pagination:{current:this.state.page,total:this.state.totalUsers,pageSize:this.state.pageSize,onChange:function(t,s){e.setState({page:t,pageSize:s},(function(){e.populateUserData()}))}},rowKey:function(e){return e.id},loading:this.state.loading}),(0,j.jsx)(f.Z,{title:t("users.Disable user"),open:this.state.isDisableOpen,onOk:function(){e.handleDisable()},onCancel:function(){e.setState({isDisableOpen:!1})},children:(0,j.jsx)("p",{children:t("users.Are you sure you want to Disabled user?")})}),(0,j.jsx)(f.Z,{title:t("users.Review user"),open:this.state.isResetOpen,onOk:function(){e.handleReview()},onCancel:function(){e.setState({isResetOpen:!1})},children:(0,j.jsx)("p",{children:t("users.Are you sure you want to Review user?")})}),(0,j.jsx)(f.Z,{title:t("users.Delete user"),open:this.state.isDeleteOpen,onOk:function(){e.handleDelete()},onCancel:function(){e.setState({isDeleteOpen:!1})},children:(0,j.jsx)("p",{children:t("users.Are you sure you want to Delete user?")})}),(0,j.jsx)(f.Z,{title:t("users.Edit user"),open:this.state.isEditOpen,onOk:function(){e.handleEdit()},onCancel:function(){e.setState({isEditOpen:!1})},children:(0,j.jsxs)("div",{className:"ul_form",children:[(0,j.jsx)("div",{className:"ul_form_title",children:t("users.firstName")}),(0,j.jsx)(h.Z,{value:a.firstName,status:n.firstName?"error":"",onChange:function(t){e.editUser(t.target.value,"firstName")}}),n.firstName&&(0,j.jsx)("div",{className:"ul_form_info",children:t("users.Please input the first name!")}),(0,j.jsx)("div",{className:"ul_form_title",children:t("users.lastName")}),(0,j.jsx)(h.Z,{value:a.lastName,status:n.lastName?"error":"",onChange:function(t){e.editUser(t.target.value,"lastName")}}),n.lastName&&(0,j.jsx)("div",{className:"ul_form_info",children:t("users.Please input the last name!")}),(0,j.jsx)("div",{className:"ul_form_title",children:t("users.email")}),(0,j.jsx)(h.Z,{value:a.email,status:n.email?"error":"",onChange:function(t){e.editUser(t.target.value,"email")}}),n.email&&(0,j.jsx)("div",{className:"ul_form_info",children:t("users.Please input the email!")}),(0,j.jsx)("div",{className:"ul_form_title",children:t("users.role")}),(0,j.jsxs)(c.Z,{value:a.role,status:n.role?"error":"",onChange:function(t){e.editUser(t,"role")},allowClear:!0,children:[(0,j.jsx)(O,{value:"administrator",children:t("usersRole.Administrator")}),(0,j.jsx)(O,{value:"supervisor",children:t("usersRole.Supervisor")}),(0,j.jsx)(O,{value:"user",children:t("usersRole.User")})]}),n.role&&(0,j.jsx)("div",{className:"ul_form_info",children:t("users.Please select the role!")})]})}),(0,j.jsx)(f.Z,{title:t("users.Change Password"),open:this.state.isChangePwdOpen,onOk:function(){e.handleChangePwd()},onCancel:function(){e.setState({isChangePwdOpen:!1})},children:(0,j.jsxs)("div",{className:"ul_form",children:[(0,j.jsx)("div",{className:"ul_form_title",children:t("users.password")}),(0,j.jsx)(h.Z,{value:i.password,status:o.password?"error":"",onChange:function(t){e.changePwd(t.target.value,"password")},type:"password"}),o.password&&(0,j.jsx)("div",{className:"ul_form_info",children:t("users.Please input the password!")}),(0,j.jsx)("div",{className:"ul_form_title",children:t("users.confirmPassword")}),(0,j.jsx)(h.Z,{value:i.confirmPassword,status:o.confirmPassword?"error":"",onChange:function(t){e.changePwd(t.target.value,"confirmPassword")},type:"password"}),o.confirmPassword&&(0,j.jsx)("div",{className:"ul_form_info",children:t("users.Please input the confirmPassword!")}),o.confirmPasswordDiff&&(0,j.jsx)("div",{className:"ul_form_info",children:t("users.The two passwords that you entered do not match!")})]})})]})}}]),s}(u.Component),b=x}}]);
//# sourceMappingURL=316.63706432.chunk.js.map