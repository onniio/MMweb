{"version":3,"file":"static/js/308.8cb0811c.chunk.js","mappings":"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","sources":["app/general/sensitiveWord.js"],"sourcesContent":["import React from 'react';\r\nimport { Button, Input, Table, Select, DatePicker, Modal, message } from 'antd';\r\nimport { SearchOutlined } from '@ant-design/icons';\r\nimport '../../style/general.less';\r\n// import PItem from './projectItem';\r\nimport fetch from '../../fetch/axios';\r\nimport moment from 'moment';\r\n\r\nconst { Search } = Input;\r\n\r\nclass HistoryList extends React.Component {\r\n  state = {\r\n    page: 0,\r\n    pageSize: 10,\r\n    total: 0,\r\n    sort: 0,\r\n    sortKey: \"\",\r\n\r\n    wordsList: [],\r\n    typeList: [], // bot列表\r\n\r\n    botId: 0, // 选中的bot\r\n    chatDate: \"\", // 选中的日期\r\n    status: -1,\r\n    search: \"\",\r\n    totalUsage: 0, // 总使用量\r\n    selectedRowKeys: [],\r\n\r\n    isGetting: false, // 是否正在获取数据\r\n\r\n    isEditOpen: false, // 是否打开编辑弹窗\r\n    selectObj: {}, // 选中的对象\r\n    selectObjError: {}, // 选中的对象的错误信息\r\n\r\n    isDeleteOpen: false, // 是否打开删除弹窗\r\n    deleteId: 0, // 删除的id\r\n  }\r\n  componentDidMount() {\r\n    this.getTypeList();\r\n    this.getWordsList();\r\n  }\r\n\r\n  changeSearch(e) {\r\n    this.setState({ search: e.target.value });\r\n  }\r\n  // 获取历史列表\r\n  getWordsList(query) {\r\n    // let { rights } = this.props.reducer;\r\n    // if (!rights.history) return;\r\n\r\n    this.setState({ isGetting: true })\r\n\r\n    let obj = {\r\n      \"PageNumber\": this.state.page,\r\n      \"PageSize\": this.state.pageSize,\r\n      \"ItemId\": 0,\r\n      \"SearchKey\": this.state.search,\r\n      \"SearchTime\": this.state.chatDate,\r\n      \"SearchCategory\": this.state.botId,\r\n      // \"ColumnName\": this.state.sortKey,\r\n      // \"ColumnSort\": this.state.sort,\r\n    }\r\n    fetch.post(`/api/SensitiveWord/List`, obj).then(res => {\r\n      if (res && res.success) {\r\n        let wordsList = res.data;\r\n        this.setState({ wordsList, isGetting: false, total: res.totalCount });\r\n        // 设置token\r\n        this.props.setToken?.(res.message);\r\n      } else {\r\n        this.setState({ wordsList: [], isGetting: false });\r\n        console.log(res.message);\r\n        message.error(res.message);\r\n      }\r\n    }).catch(err => {\r\n      this.setState({ wordsList: [], isGetting: false });\r\n    })\r\n  }\r\n  // 获取类型列表\r\n  getTypeList() {\r\n    // let { rights } = this.props.reducer;\r\n    // if (!rights.history) return;\r\n\r\n    fetch.get(`/api/SensitiveWord/category_list`).then(res => {\r\n      if (res && res.success) {\r\n        let typeList = res.data\r\n        typeList.forEach(element => {\r\n          element.label = element.category;\r\n          element.value = element.id;\r\n        });\r\n        this.setState({ typeList });\r\n      }\r\n    }).catch(err => {\r\n      this.setState({ typeList: [] });\r\n    })\r\n  }\r\n\r\n  // 打开编辑弹窗\r\n  openEditer(obj) {\r\n    let selectObj = {\r\n      id: obj.id || 0,\r\n      title: obj.content || '',\r\n      category: obj.category_Id,\r\n    }\r\n    this.setState({ isEditOpen: true, selectObj });\r\n  }\r\n  // 编辑\r\n  editWord(e, key) {\r\n    const { selectObj, selectObjError } = this.state;\r\n    selectObj[key] = e;\r\n    selectObjError[key] = !e;\r\n\r\n    this.setState({ selectObj, selectObjError });\r\n  }\r\n  handleEdit() {\r\n    const { selectObj, selectObjError } = this.state;\r\n    let errNum = 0;\r\n    // 数据验证\r\n    if (!selectObj.title) {\r\n      selectObjError.title = true;\r\n      errNum++;\r\n    }\r\n    if (!selectObj.category) {\r\n      selectObjError.category = true;\r\n      errNum++;\r\n    }\r\n    this.setState({ selectObjError });\r\n    if (errNum > 0) {\r\n      return;\r\n    }\r\n\r\n    let obj = {\r\n      \"Id\": selectObj.id,\r\n      \"Category_Id\": selectObj.category,\r\n      \"Content\": selectObj.title,\r\n    }\r\n\r\n    // 保存\r\n    fetch.post('/api/SensitiveWord/Save', obj).then(res => {\r\n      if (res.success) {\r\n        this.setState({ isEditOpen: false, selectObj: {}, selectObjError: {} });\r\n        message.success(this.props.t('Saved Success'));\r\n        this.getWordsList();\r\n      } else {\r\n        message.error(res.message);\r\n      }\r\n    }).catch(err => {\r\n      message.error(err.message);\r\n    })\r\n  }\r\n\r\n  // 打开删除弹窗\r\n  openDelete(obj) {\r\n    this.setState({\r\n      isDeleteOpen: true,\r\n      deleteId: obj?.id,\r\n    });\r\n  }\r\n  // 删除\r\n  handleDelete() {\r\n    const { deleteId, selectedRowKeys } = this.state;\r\n    let ids = deleteId ? [deleteId] : selectedRowKeys;\r\n    fetch.post('/api/SensitiveWord/delete', ids).then(res => {\r\n      if (res.success) {\r\n        this.setState({ isDeleteOpen: false, deleteId: 0, selectedRowKeys: [] });\r\n        message.success(this.props.t('Deleted Success'));\r\n        this.getWordsList();\r\n      } else {\r\n        message.error(res.message);\r\n      }\r\n    }).catch(err => {\r\n      message.error(err.message);\r\n    })\r\n  }\r\n\r\n  render() {\r\n    const { t } = this.props;\r\n    const { selectObj, selectObjError } = this.state;\r\n\r\n    const columns = [\r\n      {\r\n        title: t('general.Number'), // 序号\r\n        dataIndex: 'index',\r\n        render: (text, obj, index) => index + 1 + this.state.page * this.state.pageSize,\r\n        width: 100,\r\n        fixed: 'left',\r\n      },\r\n      {\r\n        title: t('标题'),\r\n        dataIndex: 'content',\r\n        width: 200,\r\n        fixed: 'left',\r\n        // sorter: true,\r\n      },\r\n      {\r\n        title: t('类型'),\r\n        dataIndex: 'category',\r\n        width: 200,\r\n        // sorter: true,\r\n      },\r\n      {\r\n        title: t('更新日期'),\r\n        dataIndex: 'updated_At',\r\n        render: (text, obj) => moment(text).format(\"YYYY-MM-DD  HH:mm\") || '-',\r\n        width: 200,\r\n        // sorter: true,\r\n      },\r\n      {\r\n        title: t('操作'),\r\n        dataIndex: 'operate',\r\n        render: (text, obj) => <div className='operate_box'>\r\n          <Button size='small' type=\"text\" onClick={() => { this.openEditer(obj) }}><span className='text'>{t('编辑')}</span></Button>\r\n          <div className='devide_line'></div>\r\n          <Button size='small' type=\"text\" onClick={() => { this.openDelete(obj) }}><span className='text'>{t('删除')}</span></Button>\r\n        </div>,\r\n        width: 100,\r\n        fixed: 'right',\r\n      },\r\n    ]\r\n\r\n    return (\r\n      <div className='sensitive_word'>\r\n        <div className='sw_header'>\r\n          <div className='sw_header_lt'>\r\n            {/* 按类别搜索 */}\r\n            <Select\r\n              showSearch\r\n              placeholder={t('请选择类别')}\r\n              optionFilterProp=\"children\"\r\n              onChange={(e) => {\r\n                this.setState({ botId: e||0, page: 0 }, () => {\r\n                  this.getWordsList();\r\n                })\r\n                }}\r\n              onSearch={()=>{\r\n                // this.getTypeList();\r\n              }}\r\n              filterOption={(input, option) =>\r\n                (option?.label ?? '').toLowerCase().includes(input.toLowerCase())\r\n              }\r\n              options={this.state.typeList}\r\n              style={{width: 200}}\r\n              allowClear\r\n              size=\"large\"\r\n            />\r\n            {/* 日期 */}\r\n            <DatePicker\r\n              onChange={(date, dateString) => {\r\n                this.setState({ chatDate: dateString, page: 0 }, () => {\r\n                  this.getWordsList();\r\n                })\r\n              }}\r\n              style={{width: 200, marginLeft: '1rem'}}\r\n              placeholder={t('请选择日期')}\r\n              size=\"large\"\r\n            />\r\n          </div>\r\n          <div className='sw_header_gt'>\r\n            <Search\r\n              value={this.state.search}\r\n              placeholder={t('请输入关键字')}\r\n              onChange={(e) => { this.changeSearch(e) }}\r\n              onSearch={() => { this.getWordsList() }}\r\n              className='sx_search'\r\n              enterButton={\r\n                <div className='search_btn'>\r\n                  <SearchOutlined />\r\n                  {t('搜索')}\r\n                </div>\r\n              }\r\n              style={{ width: 400 }}\r\n              // allowClear\r\n              size=\"large\"\r\n            />\r\n            <Button className='sx_del' size=\"large\" onClick={() => { this.openDelete() }} disabled={ this.state.selectedRowKeys.length === 0 }>{t('删除')}</Button>\r\n            <Button className='sx_add' size=\"large\" onClick={() => { this.openEditer({}) }}>{t('添加')}</Button>\r\n          </div>\r\n        </div>\r\n        <div className='sw_content'>\r\n          <Table\r\n            columns={columns}\r\n            dataSource={this.state.wordsList}\r\n            loading={this.state.isGetting}\r\n            onChange={(pagination, filters, sorter) => {\r\n              // console.log(pagination, filters, sorter);\r\n              if (this.state.isGetting) return;\r\n              \r\n              this.setState({\r\n                page: pagination.current - 1,\r\n                pageSize: pagination.pageSize,\r\n                sort: sorter.order === 'descend' ? 1 : 0,\r\n                sortKey: sorter.column?.dataIndex || \"\",\r\n                selectedRowKeys: []\r\n              }, () => {\r\n                this.getWordsList();\r\n              })\r\n            }}\r\n            pagination={\r\n              {\r\n                total: this.state.total,\r\n                pageSize: this.state.pageSize,\r\n                current: this.state.page + 1,\r\n                showSizeChanger: true,\r\n                showQuickJumper: true,\r\n                showTotal: (total, range) => `${range[0]}-${range[1]} of ${total} items`,\r\n              }\r\n            }\r\n            rowKey={(row) => row.id}\r\n            rowSelection={{\r\n              selectedRowKeys: this.state.selectedRowKeys,\r\n              onChange: (selectedRowKeys, selectedRows) => {\r\n                this.setState({ selectedRowKeys })\r\n              },\r\n            }}\r\n            scroll={{ x: 1000 }}\r\n          />\r\n        </div>\r\n        <Modal title={t('Edit user')} open={this.state.isEditOpen} onOk={() => { this.handleEdit() }} onCancel={() => { this.setState({ isEditOpen: false }) }}>\r\n          <div className='sw_form'>\r\n            <div className='ul_form_title'>{t('Title')}</div>\r\n            <Input\r\n              value={selectObj.title}\r\n              status={selectObjError.title ? 'error' : ''}\r\n              onChange={(e) => { this.editWord(e.target.value, 'title') }}\r\n            />\r\n            {selectObjError.title && <div className='ul_form_info'>{t('Please input the sensitive word!')}</div>}\r\n            <div className='ul_form_title'>{t('Category')}</div>\r\n            <Select\r\n              value={selectObj.category}\r\n              status={selectObjError.category ? 'error' : ''}\r\n              onChange={(e) => { this.editWord(e, 'category') }}\r\n              options={this.state.typeList}\r\n              allowClear\r\n              style={{width: '100%'}}\r\n            >\r\n            </Select>\r\n            {selectObjError.category && <div className='ul_form_info'>{t('Please select the category!')}</div>}\r\n          </div>\r\n        </Modal>\r\n        <Modal title={t('Delete')} open={this.state.isDeleteOpen} onOk={() => { this.handleDelete() }} onCancel={() => { this.setState({ isDeleteOpen: false }) }}>\r\n          <div className='ul_form'>\r\n            <div className='ul_form_title'>{t('Are you sure to delete the user?')}</div>\r\n          </div>\r\n        </Modal>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default HistoryList"],"names":["Search","Input","HistoryList","_React$Component","_inherits","_super","_createSuper","_this","_classCallCheck","_len","arguments","length","args","Array","_key","call","apply","concat","state","page","pageSize","total","sort","sortKey","wordsList","typeList","botId","chatDate","status","search","totalUsage","selectedRowKeys","isGetting","isEditOpen","selectObj","selectObjError","isDeleteOpen","deleteId","_createClass","key","value","this","getTypeList","getWordsList","e","setState","target","query","_this2","obj","fetch","post","then","res","success","_this2$props$setToken","_this2$props","data","totalCount","props","setToken","message","console","log","error","catch","err","_this3","get","forEach","element","label","category","id","title","content","category_Id","_this$state","_this4","_this$state2","errNum","t","_this5","_this$state3","ids","_this6","_this$state4","columns","dataIndex","render","text","index","width","fixed","moment","format","_jsxs","className","children","_jsx","Button","size","type","onClick","openEditer","openDelete","Select","showSearch","placeholder","optionFilterProp","onChange","onSearch","filterOption","input","option","_option$label","toLowerCase","includes","options","style","allowClear","DatePicker","date","dateString","marginLeft","changeSearch","enterButton","SearchOutlined","disabled","Table","dataSource","loading","pagination","filters","sorter","_sorter$column","current","order","column","showSizeChanger","showQuickJumper","showTotal","range","rowKey","row","rowSelection","selectedRows","scroll","x","Modal","open","onOk","handleEdit","onCancel","editWord","handleDelete","React"],"sourceRoot":""}